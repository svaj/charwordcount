tinymce.PluginManager.add("charwordcount",function(t){function e(){t.theme.panel.find("#wordcount").text(["Words: {0}, Characters: {1}",a.getCount(),a.getCountCharacters()])}var n,r,a=this;n=t.getParam("wordcount_countregex",/[\w\u2019\x27\-]+/g),r=t.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g),t.on("init",function(){var n=t.theme.panel&&t.theme.panel.find("#statusbar")[0];n&&window.setTimeout(function(){n.insert({type:"label",name:"wordcount",text:["Words: {0}, Characters: {1}",a.getCount(),a.getCountCharacters()],classes:"wordcount"},0),t.on("setcontent beforeaddundo keyup",e)},0)}),a.getCount=function(){var e=t.getContent({format:"raw"}),a=0;if(e){e=e.replace(/\.\.\./g," "),e=e.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," "),e=e.replace(/(\w+)(&.+?;)+(\w+)/,"$1$3").replace(/&.+?;/g," "),e=e.replace(r,"");var o=e.match(n);o&&(a=o.length)}return a},a.getCountCharacters=function(){if(1==t.settings.charwordcount_include_tags){rawContent=t.getContent();var e=rawContent.match(/(\r\n|\n|\r)/g),n=0;return null!=e&&(n=e.length),rawContent.length+n}var r=t.getContent({format:"raw"}).replace(/<.[^<>]*?>/g,"").replace(/&[^;]+;/g,"?");return r.length}});